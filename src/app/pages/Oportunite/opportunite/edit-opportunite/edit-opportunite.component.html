<form [formGroup]="oppF" class="row g-3 needs-validation custom-form" novalidate>

    <div class="form-row">
    <div class="form-group col-md-6">
        <label for="nom" class="form-label">Nom:</label>
        <input class="form-control" formControlName="nom" id="nom" type="text" required>
        <!--        <div *ngIf="demandeForm.get('nom').invalid && (demandeForm.get('nom').dirty || demandeForm.get('nom').touched)"-->
        <!--             class="alert alert-danger">-->
        <!--            <div *ngIf="demandeForm.get('nom').errors.required">-->
        <!--                Nom is required.-->
        <!--            </div>-->
        <!--        </div>-->
    </div>

    <div class="form-group col-md-6">
        <label for="montantEstime" class="form-label">Budget alloué:</label>
        <input class="form-control" formControlName="montantEstime" id="montantEstime" type="text" required>
        <!--        <div *ngIf="demandeForm.get('nom').invalid && (demandeForm.get('nom').dirty || demandeForm.get('nom').touched)"-->
        <!--             class="alert alert-danger">-->
        <!--            <div *ngIf="demandeForm.get('nom').errors.required">-->
        <!--                Nom is required.-->
        <!--            </div>-->
        <!--        </div>-->
    </div>
    </div>

        <div class="form-group">
            <label for="description" class="form-label">Description:</label>
            <textarea class="form-control" formControlName="description" id="description" type="text" required></textarea>
            <!--        <div *ngIf="demandeForm.get('nom').invalid && (demandeForm.get('nom').dirty || demandeForm.get('nom').touched)"-->
            <!--             class="alert alert-danger">-->
            <!--            <div *ngIf="demandeForm.get('nom').errors.required">-->
            <!--                Nom is required.-->
            <!--            </div>-->
            <!--        </div>-->
        </div>
    <div class="form-group">
        <label for="demande" class="form-label">Demande Associée :</label>
        <!--        <select class="form-select" formControlName="client" id="client">-->
        <!--            <option *ngFor="let client of clients" [value]="client.id">{{ client.nom }}</option>-->
        <!--        </select>-->
        <select #demandeSelect class="form-select"  id="demande"   (change)="onSelected(demandeSelect.value)">
            <option *ngFor="let demande of demandes" [value]="demande.id">{{ demande.nom }}</option>
        </select>
    </div>
    <div *ngIf="selectedDemande">
        <h2>Demande Information</h2>
        <div class="form-group">
            <label for="nomDemande" class="form-label">Nom Demande:</label>
            <input class="form-control" id="nomDemande" type="text" [value]="demandeF.get('nom').value" readonly>
        </div>
        <div class="form-group">
            <label for="client" class="form-label">Client:</label>
            <input class="form-control" id="client" type="text" [value]="demandeF.get('client').value" readonly>
        </div>
        <div class="form-group">
            <label for="statut" class="form-label">Statut:</label>
            <input class="form-control" id="statut" type="text" [value]="demandeF.get('statut').value" readonly>
        </div>
        <div class="form-group">
            <label for="source" class="form-label">Source:</label>
            <input class="form-control" id="source" type="text" [value]="demandeF.get('source').value" readonly>
        </div>
        <div class="form-group">
            <label for="commentaires" class="form-label">Commentaires:</label>
            <input class="form-control" id="commentaires" type="text" [value]="demandeF.get('commentaires').value" readonly>
        </div>
        <div class="form-group">
            <label for="deadline" class="form-label">Deadline:</label>
            <input class="form-control" id="deadline" type="text" [value]="demandeF.get('deadline').value" readonly>
        </div>
        <div class="form-group">
            <label for="descriptionDemande" class="form-label">Description Demande:</label>
            <input class="form-control" id="descriptionDemande" type="text" [value]="demandeF.get('description').value" readonly>
        </div>
    </div>


    <div class="d-grid gap-2 d-md-flex justify-content-md-between">
        <!--            <button (click)="Return()" class="btn btn-light" mdbRipple type="button">Annuler</button>-->
        <!--            <button class="btn btn-success me-md-2" mdbRipple type="submit">Confirmer</button>-->
        <app-workflow-decision
                *ngIf="oppForm &&(oppForm['workflow']!=undefined ||!(this.oppForm.userPermission == 'WRITE')) "
                (decisionEvent)="Confirmation($event)"
                (saveEvent)="save()"
                (RetournEvent)="Retourn()"
                [access]="oppForm['userPermission'] === 'READ' || oppForm['userPermission'] === 'NONE'"
                [decisions]="decissionWF"
                [object]="oppForm"
                [SaveObject]="oppForm">
        </app-workflow-decision>

        <!--        <div class="d-grid gap-2 d-md-flex justify-content-md-between">-->
        <!--            <button mdbRipple class="btn btn-light" type="button" (click)="Return()">Annuler</button>-->
        <!--            <button mdbRipple class="btn btn-success me-md-2" type="submit" >Confirmer</button>-->

    </div>
</form>

