<dx-popup
        [maxWidth]="940"
        [width]="500"
        [height]="'auto'"
        [showTitle]="true"
        title="Créer une opportunité"
        [dragEnabled]="false"
        [closeOnOutsideClick]="true"
        [(visible)]="showModal">

    <p>Voulez-vous créer un Bon de commande ?</p>
    <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-8 col-xs-12">
            <button
                    class="btn btn-secondary"
                    (click)="onCancelClick()">Annuler</button> </div>
        <div class="col-lg-6 col-md-6 col-sm-8 col-xs-12 alignRight">
            <button
                    class="btn btn-primary"
                    (click)="onCreateOpportunityClick()">Créer Bon de commande</button></div>
    </div>
</dx-popup>
<dx-toolbar>
    <dxi-item
            location="before"
            widget="dxButton"
            [options]="backButtonOptions">
    </dxi-item>
    <dxi-item
            location="after"
            widget="dxButton"
            [options]="addButtonOptions">
    </dxi-item>

</dx-toolbar>

<div>

    <div class="card-header text-center bg-secondary text-white" style="background-color: #40B3A2 !important;">
        <div class="d-flex justify-content-center align-items-center" style="width: 100%;">
            <div *ngIf="objectData!=undefined" class="d-flex align-items-center">
                <h5> Modifier offre  ({{objectData.id}})</h5>
                <div class="icon-container ml-3" style="cursor: pointer;" (click)="showPopupWF()" title="{{'show-event.Voir la liste des événements' | translate}}">
                    <i class="fas fa-project-diagram"></i>
                </div>
            </div>
        </div>
    </div>

</div>


<ul class="nav nav-tabs nav-justified mb-3" id="ex1" role="tablist">
    <li class="nav-item" role="presentation">
        <a
                data-mdb-tab-init
                class="nav-link"
                id="ex3-tab-1"
                href="#ex3-tabs-1"
                role="tab"
                aria-controls="ex3-tabs-1"
                aria-selected="true"
        >Client Info</a
        >
    </li>
    <li class="nav-item" role="presentation">
        <a
                data-mdb-tab-init
                class="nav-link"
                id="ex3-tab-2"
                href="#ex3-tabs-2"
                role="tab"
                aria-controls="ex3-tabs-2"
                aria-selected="false"
        >Opportunité Info</a
        >
    </li>
    <li class="nav-item" role="presentation">
        <a
                data-mdb-tab-init
                class="nav-link active"
                id="ex3-tab-3"
                href="#ex3-tabs-3"
                role="tab"
                aria-controls="ex3-tabs-3"
                aria-selected="false"
        >Offre de prix</a
        >
    </li>
</ul>
<!-- Tabs navs -->

<!-- Tabs content -->
<div class="tab-content" id="ex2-content">
    <div
            class="tab-pane fade "
            id="ex3-tabs-1"
            role="tabpanel"
            aria-labelledby="ex3-tab-1"
    >
        <div class="custom-field">
            <h1>
                    <span>
                       Client Info
                    </span>
            </h1>
            <div class="fieldContent">
                <div >
                    <div class="form-group">
                        <label class="form-label"><b>Nom du client:</b></label>
                        <input class="form-control"  type="text" [value]="objectData?.opportunite?.demande?.client?.nom" readonly />
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label class="form-label"><b>Adresse:</b></label>
                            <input  class="form-control"  type="text" [value]="objectData?.opportunite?.demande?.client?.adresse" readonly />
                        </div>

                        <div class="form-group col-md-6">
                            <label  class="form-label"><b>Date d'Inscription :</b></label>
                            <input  class="form-control"  type="text" [value]="objectData?.opportunite?.demande?.client?.dateInscription | date:'medium'" readonly />
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label class="form-label"><b>Email:</b></label>
                            <input  class="form-control"  type="text" [value]="objectData?.opportunite?.demande?.client?.email" readonly />
                        </div>

                        <div class="form-group col-md-6">
                            <label  class="form-label"><b>Telephone:</b></label>
                            <input  class="form-control"  type="text" [value]="objectData?.opportunite?.demande?.client?.telephne" readonly />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label"><b>Type du client:</b></label>
                        <input class="form-control"  type="text" [value]="objectData?.opportunite?.demande?.client?.typeClient" readonly />
                    </div>
                    <div class="form-group">
                        <label class="form-label"><b>Description:</b></label>

                        <input class="form-control"  type="text" [value]="objectData?.opportunite?.demande?.client?.description" readonly />

                    </div>
                </div>
            </div>
        </div>
    </div>

    <div
            class="tab-pane fade"
            id="ex3-tabs-2"
            role="tabpanel"
            aria-labelledby="ex3-tab-2"
    >
        <div class="custom-field">
            <h1>
                    <span>
                       Opportunité Info
                    </span>
            </h1>
            <div class="fieldContent">
                <div class="form-group">
                    <label class="form-label"><b>Nom de l'opportuité:</b></label>
                    <input class="form-control"  type="text" [value]="objectData?.opportunite?.nom" readonly />
                </div>
                <div class="form-group">
                    <label  class="form-label"><b>Created At:</b></label>
                    <input  class="form-control"  type="text" [value]="objectData?.opportunite?.createAt | date:'medium'" readonly />
                </div>

                <div class="form-group ">
                    <label for="description" class="form-label">Description:</label>
                    <textarea class="form-control" formControlName="description" [value]="objectData?.opportunite?.description" type="text"  readonly></textarea>

                </div>

            </div>


        </div>
        <div class="custom-field">
            <h1>
                    <span>
                        Les fichiers
                    </span>
            </h1>
            <div class="fieldContent">

                <app-attachment *ngIf="objectData?.opportunite?.id && objectData?.opportunite?.id !== null"
                                [classid]="31"
                                [objectid]="objectData?.opportunite?.id"
                                [objectData]="objectData?.opportunite"
                                [isPublic]=false
                                (jsondocviewerEvent)="GetjsonDowViewerFromAttatchement($event)"
                                [withoutviewer]="true"
                                [ShowSplitter]=true

                                (refreshedReqFileDef)="getInstructionById(objectData.id)"
                                #attachmentComponent
                ></app-attachment>
            </div>
        </div>
    </div>
    <div

            class="tab-pane fade show active"
            id="ex3-tabs-3"
            role="tabpanel"
            aria-labelledby="ex3-tab-3"
    >
        <div  >

            <style>
                /* Defining a custom border on all
                    sides except the top side */
                .custom-field {
                    border: 1px solid #40B3A2;
                    border-top: none;
                    margin-top: 32px ;

                    padding: 8px;
                    border-radius: 8px !important;
                }

                /* Defining the style of the
                heading/legend for custom fieldset */
                .custom-field h1 {
                    font-size: 15px;
                    margin: -16px -8px 0;
                    color: #40B3A2;

                    font-weight: 500;
                }

                /* Using float:left allows us to mimic
                   the legend like fieldset. The
                   float:right property can also be
                   used to show the legend on right side */

                .custom-field h1 span {
                    float: left;
                }

                /* Creating the custom top border to make
                    it look like fieldset defining small
                    border before the legend. The width
                    can be modified to change position
                    of the legend */
                .custom-field h1:before {
                    border-top: 1px solid #40B3A2;
                    content: ' ';
                    float: left;
                    margin: 8px 2px 0 2px;
                    width: 20px;
                    border-radius: 8px !important;
                }

                /* Defining a long border after the
                legend, using overflow hidden to
                actually hide the line behind the
                legend text. It can be removed
                for a different effect */
                .custom-field h1:after {
                    border-top: 1px solid #40B3A2;
                    content: ' ';
                    display: block;
                    height: 24px;
                    left: 2px;
                    margin: 0 1px 0 0;
                    overflow: hidden;
                    position: relative;
                    top: 8px;
                    border-top-right-radius: 8px ;
                }
                .fieldContent{

                    padding: 20px;

                }
            </style>
            <div
                    class="tab-pane fade {{ creationOffre ? 'show active' : '' }}"

                    role="tabpanel"
                    aria-labelledby="ex3-tab-1"
                    *ngIf="creationOffre"
            >
                <div class="custom-field">
                    <h1>
                    <span>
                        Offre de prix
                    </span>
                    </h1>
                    <div class="fieldContent">
                        <form [formGroup]="offreF" class="row g-3 needs-validation custom-form" novalidate>



                            <div class="form-group">
                                <label for="montant" class="form-label">montant:</label>
                                <input class="form-control" formControlName="montant" id="montant" type="number" required>

                            </div>


                            <div class="form-group">
                                <label for="description" class="form-label">Description:</label>
                                <textarea class="form-control" formControlName="description" id="description" type="text" required></textarea>

                            </div>

                            <div class="form-group">
                                <label for="dateLivraison" class="form-label">Date de livraison:</label>
                                <input class="form-control" formControlName="dateLivraison" id="dateLivraison" type="date" required>
                            </div>



                        </form>

                    </div>

                </div>
                <div class="custom-field">
                    <h1>
                    <span>
                      Articles
                    </span>
                    </h1>
                    <div class="fieldContent">

                    </div>
                    <dx-data-grid
                        #gridContainer

                        [dataSource]="tasks"

                        [columns]="['nom', 'quantite', 'prixUnitaire']"
                        [showBorders]="true"
                        (onToolbarPreparing)="onToolbarPreparing($event)"
                        id="gridContainer2"
                        keyExpr="id"
                    >

                        <dxi-column dataField="nom"></dxi-column>
                        <dxi-column dataField="quantite"></dxi-column>
                        <dxi-column dataField="prixUnitaire"></dxi-column>

                        <dxi-column [allowResizing]="false"
                                    [fixed]="false" caption="{{'' | translate}}"
                                    cellTemplate="cellTemplateActions"
                        >
                        </dxi-column>
                        <div *dxTemplate="let data of 'cellTemplateActions'"
                             style="display: flex; justify-content: center; align-items: center;">
                            <a (click)="editTask(data.data)" target="_blank"
                               title="Consulter demande"><i
                                    class="fa fa-edit eyeIconStyle"></i></a>&nbsp;

                            <a (click)="deleteArticle(data.data.id)" target="_blank"   title="" >
                                <i class="fa fa-trash" style="color:#168c94;">
                                </i></a>
                        </div>

                    </dx-data-grid>
                    <dx-popup
                            [(visible)]="popupVisible"
                            [width]="600"
                            [height]="400"
                            [showTitle]="true"
                            title="Ajouter Article"
                            [dragEnabled]="true"
                            [closeOnOutsideClick]="true">
                        <div *dxTemplate="let data of 'content'">
                            <form [formGroup]="taskForm">
                                <div class="form-group">
                                    <label>Nom:</label>
                                    <input type="text" class="form-control" formControlName="nom">
                                </div>

                                <div class="form-group">
                                    <label >Quantite:</label>
                                    <input type="number" class="form-control" formControlName="quantite">
                                </div>
                                <div class="form-group">
                                    <label >prix Unitaire:</label>
                                    <input type="number" class="form-control" formControlName="prixUnitaire">
                                </div>
                                <div class="form-group">
                                    <label for="description">Description:</label>
                                    <textarea type="text" class="form-control" formControlName="description"></textarea>
                                </div>
                            </form>
                            <div class="dx-popup-bottom">
                                <button type="button" class="btn btn-secondary" (click)="closePopup()">Cancel</button>
                                <button type="button" class="btn btn-primary" (click)="addTask()">Add</button>
                            </div>
                        </div>
                    </dx-popup>
                </div>
                <div class="custom-field">
                    <h1>
                    <span>
                        Gestion des fichiers
                    </span>
                    </h1>
                    <div class="fieldContent">

                <app-attachment *ngIf="objectData.id && objectData.id !== null"
                                [classid]="this.objectData.classId"
                                [objectid]="this.objectData.id"
                                [objectData]="objectData"
                                [isPublic]=false
                                (jsondocviewerEvent)="GetjsonDowViewerFromAttatchement($event)"
                                [withoutviewer]="true"
                                [ShowSplitter]=true

                                (refreshedReqFileDef)="getInstructionById(objectData.id)"
                                #attachmentComponent
                ></app-attachment>
                    </div>
                </div>

                <div class="workflow-container">
                    <!--            <button (click)="Return()" class="btn btn-light" mdbRipple type="button">Annuler</button>-->
                    <!--            <button class="btn btn-success me-md-2" mdbRipple type="submit">Confirmer</button>-->
                    <app-workflow-decision
                            *ngIf="offreForm &&(offreForm['workflow']!=undefined ||!(this.offreForm.userPermission == 'WRITE')) "
                            (decisionEvent)="Confirmation($event)"
                            (saveEvent)="save()"
                            (RetournEvent)="Retourn()"
                            [access]="offreForm['userPermission'] === 'READ' || offreForm['userPermission'] === 'NONE'"
                            [decisions]="decissionWF"
                            [object]="offreForm"
                            [SaveObject]="offreForm">
                    </app-workflow-decision>

                </div>
            </div>
            <div
                    class="tab-pane fade {{ validation ? 'show active' : '' }}"

                    role="tabpanel"
                    aria-labelledby="ex3-tab-2"
                    *ngIf="validation"
            >
                <div class="custom-field">
                    <h1>
                    <span>
                        Offre de prix
                    </span>
                    </h1>
                    <div class="fieldContent">
                        <form [formGroup]="offreF" class="row g-3 needs-validation custom-form" novalidate>


                            <div class="form-group">
                                <label for="montant" class="form-label">montant:</label>
                                <input class="form-control" formControlName="montant"  type="number" required>

                            </div>


                            <div class="form-group">
                                <label for="description" class="form-label">Description:</label>
                                <textarea class="form-control" formControlName="description"  type="text" required></textarea>

                            </div>

                            <div class="form-group">
                                <label for="dateLivraison" class="form-label">Date de livraison:</label>
                                <input class="form-control" formControlName="dateLivraison" type="date" required>
                            </div>

                        </form>
                    </div>
                </div>
                <div class="custom-field">
                    <h1>
                    <span>
                      Articles
                    </span>
                    </h1>
                    <div class="fieldContent">

                    </div>
                    <dx-data-grid
                        #gridContainer

                        [dataSource]="tasks"

                        [columns]="['nom', 'quantite', 'prixUnitaire']"
                        [showBorders]="true"
                        (onToolbarPreparing)="onToolbarPreparing($event)"
                        id="gridContainer1"
                        keyExpr="id"
                    >

                        <dxi-column dataField="nom"></dxi-column>
                        <dxi-column dataField="quantite"></dxi-column>
                        <dxi-column dataField="prixUnitaire"></dxi-column>

                        <dxi-column [allowResizing]="false"
                                    [fixed]="false" caption="{{'' | translate}}"
                                    cellTemplate="cellTemplateActions"
                        >
                        </dxi-column>
                        <div *dxTemplate="let data of 'cellTemplateActions'"
                             style="display: flex; justify-content: center; align-items: center;">
                            <a (click)="editTask(data.data)" target="_blank"
                               title="Consulter demande"><i
                                    class="fa fa-edit eyeIconStyle"></i></a>&nbsp;

                            <a (click)="deleteArticle(data.data.id)" target="_blank"   title="" >
                                <i class="fa fa-trash" style="color:#168c94;">
                                </i></a>
                        </div>

                    </dx-data-grid>
                    <dx-popup
                            [(visible)]="popupVisible"
                            [width]="600"
                            [height]="400"
                            [showTitle]="true"
                            title="Ajouter Article"
                            [dragEnabled]="true"
                            [closeOnOutsideClick]="true">
                        <div *dxTemplate="let data of 'content'">
                            <form [formGroup]="taskForm">
                                <div class="form-group">
                                    <label>Nom:</label>
                                    <input type="text" class="form-control" formControlName="nom">
                                </div>

                                <div class="form-group">
                                    <label >Quantite:</label>
                                    <input type="number" class="form-control" formControlName="quantite">
                                </div>
                                <div class="form-group">
                                    <label >prix Unitaire:</label>
                                    <input type="number" class="form-control" formControlName="prixUnitaire">
                                </div>
                                <div class="form-group">
                                    <label for="description">Description:</label>
                                    <textarea type="text" class="form-control" formControlName="description"></textarea>
                                </div>
                            </form>
                            <div class="dx-popup-bottom">
                                <button type="button" class="btn btn-secondary" (click)="closePopup()">Cancel</button>
                                <button type="button" class="btn btn-primary" (click)="addTask()">Add</button>
                            </div>
                        </div>
                    </dx-popup>
                </div>
                <div class="custom-field">
                    <h1>
                    <span>
                        Gestion des fichiers
                    </span>
                    </h1>
                    <div class="fieldContent">

                        <app-attachment *ngIf="objectData.id && objectData.id !== null"
                                        [classid]="this.objectData.classId"
                                        [objectid]="this.objectData.id"
                                        [objectData]="objectData"
                                        [isPublic]=false
                                        (jsondocviewerEvent)="GetjsonDowViewerFromAttatchement($event)"
                                        [withoutviewer]="true"
                                        [ShowSplitter]=true

                                        (refreshedReqFileDef)="getInstructionById(objectData.id)"
                                        #attachmentComponent
                        ></app-attachment>
                    </div>
                </div>

                <div class="workflow-container">
                    <!--            <button (click)="Return()" class="btn btn-light" mdbRipple type="button">Annuler</button>-->
                    <!--            <button class="btn btn-success me-md-2" mdbRipple type="submit">Confirmer</button>-->
                    <app-workflow-decision
                            *ngIf="offreForm &&(offreForm['workflow']!=undefined ||!(this.offreForm.userPermission == 'WRITE')) "
                            (decisionEvent)="Confirmation($event)"
                            (saveEvent)="save()"
                            (RetournEvent)="Retourn()"
                            [access]="offreForm['userPermission'] === 'READ' || offreForm['userPermission'] === 'NONE'"
                            [decisions]="decissionWF"
                            [object]="offreForm"
                            [SaveObject]="offreForm">
                    </app-workflow-decision>

                </div>
            </div>
            <div
                    class="tab-pane fade {{ reponse ? 'show active' : '' }}"

                    role="tabpanel"
                    aria-labelledby="ex3-tab-3"
                    *ngIf="reponse"
            >
                <div class="custom-field">
                    <h1>
                    <span>
                        Offre de prix
                    </span>
                    </h1>
                    <div class="fieldContent">
                        <form [formGroup]="offreF" class="row g-3 needs-validation custom-form" novalidate>


                            <!--            <div class="form-group">-->
                            <!--                <label class="form-label">mode de Paiement:</label>-->
                            <!--                <select formControlName="modePaiement" class="form-select">-->
                            <!--                    <option value="">Sélectionner un mode de paiement</option>-->
                            <!--                    <option value="carte">Carte de crédit</option>-->
                            <!--                    <option value="virement">Virement bancaire</option>-->

                            <!--                    <option value="espece">Espèces</option>-->
                            <!--                    <option value="cheque">Chèque</option>-->
                            <!--                </select>-->

                            <!--            </div>-->

                            <div class="form-group">
                                <label for="montant" class="form-label">montant:</label>
                                <input class="form-control" formControlName="montant"  type="number" required>

                            </div>


                            <div class="form-group">
                                <label for="description" class="form-label">Description:</label>
                                <textarea class="form-control" formControlName="description"  type="text" required></textarea>

                            </div>

                            <div class="form-group">
                                <label for="dateLivraison" class="form-label">Date de livraison:</label>
                                <input class="form-control" formControlName="dateLivraison" type="date" required>
                            </div>

                        </form>
                    </div>

                </div>

                <div class="custom-field">
                    <h1>
                    <span>
                      Articles
                    </span>
                    </h1>
                    <div class="fieldContent">

                    </div>
                    <dx-data-grid
                        #gridContainer

                        [dataSource]="tasks"

                        [columns]="['nom', 'quantite', 'prixUnitaire']"
                        [showBorders]="true"
                        (onToolbarPreparing)="onToolbarPreparing($event)"
                        id="gridContainer3"
                        keyExpr="id"
                    >

                        <dxi-column dataField="nom"></dxi-column>
                        <dxi-column dataField="quantite"></dxi-column>
                        <dxi-column dataField="prixUnitaire"></dxi-column>

                        <dxi-column [allowResizing]="false"
                                    [fixed]="false" caption="{{'' | translate}}"
                                    cellTemplate="cellTemplateActions"
                        >
                        </dxi-column>
                        <div *dxTemplate="let data of 'cellTemplateActions'"
                             style="display: flex; justify-content: center; align-items: center;">
                            <a (click)="editTask(data.data)" target="_blank"
                               title="Consulter demande"><i
                                    class="fa fa-edit eyeIconStyle"></i></a>&nbsp;

                            <a (click)="deleteArticle(data.data.id)" target="_blank"   title="" >
                                <i class="fa fa-trash" style="color:#168c94;">
                                </i></a>
                        </div>

                    </dx-data-grid>
                    <dx-popup
                            [(visible)]="popupVisible"
                            [width]="600"
                            [height]="400"
                            [showTitle]="true"
                            title="Ajouter Article"
                            [dragEnabled]="true"
                            [closeOnOutsideClick]="true">
                        <div *dxTemplate="let data of 'content'">
                            <form [formGroup]="taskForm">
                                <div class="form-group">
                                    <label>Nom:</label>
                                    <input type="text" class="form-control" formControlName="nom">
                                </div>

                                <div class="form-group">
                                    <label >Quantite:</label>
                                    <input type="number" class="form-control" formControlName="quantite">
                                </div>
                                <div class="form-group">
                                    <label >prix Unitaire:</label>
                                    <input type="number" class="form-control" formControlName="prixUnitaire">
                                </div>
                                <div class="form-group">
                                    <label for="description">Description:</label>
                                    <textarea type="text" class="form-control" formControlName="description"></textarea>
                                </div>
                            </form>
                            <div class="dx-popup-bottom">
                                <button type="button" class="btn btn-secondary" (click)="closePopup()">Cancel</button>
                                <button type="button" class="btn btn-primary" (click)="addTask()">Add</button>
                            </div>
                        </div>
                    </dx-popup>
                </div>

                <div class="custom-field">
                    <h1>
                    <span>
                        Gestion des fichiers
                    </span>
                    </h1>
                    <div class="fieldContent">

                        <app-attachment *ngIf="objectData.id && objectData.id !== null"
                                        [classid]="this.objectData.classId"
                                        [objectid]="this.objectData.id"
                                        [objectData]="objectData"
                                        [isPublic]=false
                                        (jsondocviewerEvent)="GetjsonDowViewerFromAttatchement($event)"
                                        [withoutviewer]="true"
                                        [ShowSplitter]=true

                                        (refreshedReqFileDef)="getInstructionById(objectData.id)"
                                        #attachmentComponent
                        ></app-attachment>
                    </div>
                </div>

                <div class="workflow-container">
                    <!--            <button (click)="Return()" class="btn btn-light" mdbRipple type="button">Annuler</button>-->
                    <!--            <button class="btn btn-success me-md-2" mdbRipple type="submit">Confirmer</button>-->
                    <app-workflow-decision
                            *ngIf="offreForm &&(offreForm['workflow']!=undefined ||!(this.offreForm.userPermission == 'WRITE')) "
                            (decisionEvent)="Confirmation($event)"
                            (saveEvent)="save()"
                            (RetournEvent)="Retourn()"
                            [access]="offreForm['userPermission'] === 'READ' || offreForm['userPermission'] === 'NONE'"
                            [decisions]="decissionWF"
                            [object]="offreForm"
                            [SaveObject]="offreForm">
                    </app-workflow-decision>

                </div>
            </div>

            <div
                    class="tab-pane fade {{ elsebool ? 'show active' : '' }}"

                    role="tabpanel"
                    aria-labelledby="ex3-tab-4"
                    *ngIf="elsebool"
            >
                <div class="custom-field">
                    <h1>
                    <span>
                        Offre de prix
                    </span>
                    </h1>
                    <div class="fieldContent">
                        <!-- Your content for the new tab goes here -->
                        <form [formGroup]="offreF" class="row g-3 needs-validation custom-form" novalidate>



                            <div class="form-group">
                                <label for="montant" class="form-label">montant:</label>
                                <input class="form-control" formControlName="montant"  type="number" required>

                            </div>


                            <div class="form-group">
                                <label for="description" class="form-label">Description:</label>
                                <textarea class="form-control" formControlName="description"  type="text" required></textarea>

                            </div>

                            <div class="form-group">
                                <label for="dateLivraison" class="form-label">Date de livraison:</label>
                                <input class="form-control" formControlName="dateLivraison" type="date" required>
                            </div>

                        </form>
                    </div>

                </div>

                <div class="custom-field">
                    <h1>
                    <span>
                      Articles
                    </span>
                    </h1>
                    <div class="fieldContent">

                    </div>
                    <dx-data-grid
                        #gridContainer

                        [dataSource]="tasks"

                        [columns]="['nom', 'quantite', 'prixUnitaire']"
                        [showBorders]="true"
                        (onToolbarPreparing)="onToolbarPreparing($event)"
                        id="gridContainer"
                        keyExpr="id"
                    >

                        <dxi-column dataField="nom"></dxi-column>
                        <dxi-column dataField="quantite"></dxi-column>
                        <dxi-column dataField="prixUnitaire"></dxi-column>

                        <dxi-column [allowResizing]="false"
                                    [fixed]="false" caption="{{'' | translate}}"
                                    cellTemplate="cellTemplateActions"
                        >
                        </dxi-column>
                        <div *dxTemplate="let data of 'cellTemplateActions'"
                             style="display: flex; justify-content: center; align-items: center;">
                            <a (click)="editTask(data.data)" target="_blank"
                               title="Consulter demande"><i
                                    class="fa fa-edit eyeIconStyle"></i></a>&nbsp;

                            <a (click)="deleteArticle(data.data.id)" target="_blank"   title="" >
                                <i class="fa fa-trash" style="color:#168c94;">
                                </i></a>
                        </div>

                    </dx-data-grid>
                    <dx-popup
                            [(visible)]="popupVisible"
                            [width]="600"
                            [height]="400"
                            [showTitle]="true"
                            title="Ajouter Article"
                            [dragEnabled]="true"
                            [closeOnOutsideClick]="true">
                        <div *dxTemplate="let data of 'content'">
                            <form [formGroup]="taskForm">
                                <div class="form-group">
                                    <label>Nom:</label>
                                    <input type="text" class="form-control" formControlName="nom">
                                </div>

                                <div class="form-group">
                                    <label >Quantite:</label>
                                    <input type="number" class="form-control" formControlName="quantite">
                                </div>
                                <div class="form-group">
                                    <label >prix Unitaire:</label>
                                    <input type="number" class="form-control" formControlName="prixUnitaire">
                                </div>
                                <div class="form-group">
                                    <label for="description">Description:</label>
                                    <textarea type="text" class="form-control" formControlName="description"></textarea>
                                </div>
                            </form>
                            <div class="dx-popup-bottom">
                                <button type="button" class="btn btn-secondary" (click)="closePopup()">Cancel</button>
                                <button type="button" class="btn btn-primary" (click)="addTask()">Add</button>
                            </div>
                        </div>
                    </dx-popup>
                </div>
                <div class="custom-field">
                    <h1>
                    <span>
                        Gestion des fichiers
                    </span>
                    </h1>
                    <div class="fieldContent">

                        <app-attachment *ngIf="objectData.id && objectData.id !== null"
                                        [classid]="this.objectData.classId"
                                        [objectid]="this.objectData.id"
                                        [objectData]="objectData"
                                        [isPublic]=false
                                        (jsondocviewerEvent)="GetjsonDowViewerFromAttatchement($event)"
                                        [withoutviewer]="true"
                                        [ShowSplitter]=true

                                        (refreshedReqFileDef)="getInstructionById(objectData.id)"
                                        #attachmentComponent
                        ></app-attachment>
                    </div>
                </div>

                <div class="workflow-container">
                    <!--            <button (click)="Return()" class="btn btn-light" mdbRipple type="button">Annuler</button>-->
                    <!--            <button class="btn btn-success me-md-2" mdbRipple type="submit">Confirmer</button>-->
                    <app-workflow-decision
                            *ngIf="offreForm &&(offreForm['workflow']!=undefined ||!(this.offreForm.userPermission == 'WRITE')) "
                            (decisionEvent)="Confirmation($event)"
                            (saveEvent)="save()"
                            (RetournEvent)="Retourn()"
                            [access]="offreForm['userPermission'] === 'READ' || offreForm['userPermission'] === 'NONE'"
                            [decisions]="decissionWF"
                            [object]="offreForm"
                            [SaveObject]="offreForm">
                    </app-workflow-decision>

                </div>
            </div>



        </div>
    </div>
</div>
<!-- Tabs content -->

<dx-popup
        [showCloseButton]="true"
        [maxWidth]="'auto'"
        [width]="popupWidth"
        [height]="popupHeight"
        [showTitle]="false"
        title="Workflow Viewer"
        [dragEnabled]="false"
        [closeOnOutsideClick]="true"
        [(visible)]="popupViewerVisible">
    <div *dxTemplate="let data of 'content'">
        <app-journal [viewerUrl]="objectData.workflow.wfProcessID" [historicsWF]="objectData.workflow.historicWF" [historicsEvt]="objectData.events"
                     [historicsAcces]="objectData.userActivity"></app-journal>
    </div>
</dx-popup>


<dx-load-panel
    #loadPanel
    shadingColor="rgba(0,0,0,0.4)"
    [position]="{ of: '#employee' }"
    [(visible)]="loadingVisible"
    [showIndicator]="true"
    [showPane]="true"
    [shading]="true"
    [hideOnOutsideClick]="false"

>
</dx-load-panel>